{
  "schemes": [
    "http"
  ],
  "swagger": "2.0",
  "info": {
    "description": "API to receive events from factomd",
    "title": "Live Feed API",
    "license": {
      "name": "MIT",
      "url": "http://opensource.org/licenses/MIT"
    },
    "version": "0.0.1"
  },
  "host": "localhost:8700",
  "paths": {
    "/subscribe": {
      "post": {
        "description": "Subscribe a new application to receive an event",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "subscription"
        ],
        "operationId": "SubscriptionRequest",
        "parameters": [
          {
            "x-go-name": "Subscription",
            "description": "The subscription registration for receiving information from factomd through the live api.",
            "name": "subscription",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/Subscription"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/SubscriptionResponse"
          },
          "400": {
            "$ref": "#/responses/ApiError"
          }
        }
      }
    },
    "/subscribe/{id}": {
      "put": {
        "description": "Update a subscription for receiving events from the api",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "subscription"
        ],
        "operationId": "UpdateSubscriptionRequest",
        "parameters": [
          {
            "type": "string",
            "x-go-name": "ID",
            "description": "subscription id",
            "name": "id",
            "in": "path",
            "required": true
          },
          {
            "x-go-name": "Subscription",
            "description": "The subscription registration for receiving information from factomd through the live api.",
            "name": "subscription",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/Subscription"
            }
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/UpdateSubscriptionResponse"
          },
          "400": {
            "$ref": "#/responses/ApiError"
          }
        }
      },
      "delete": {
        "description": "Unsubscribe an application from receiving events from the api",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ],
        "tags": [
          "subscription"
        ],
        "operationId": "UnsubscribeRequest",
        "parameters": [
          {
            "type": "string",
            "x-go-name": "ID",
            "description": "subscription id",
            "name": "id",
            "in": "path",
            "required": true
          }
        ],
        "responses": {
          "200": {
            "$ref": "#/responses/UnsubscriptionResponse"
          },
          "400": {
            "$ref": "#/responses/ApiError"
          }
        }
      }
    }
  },
  "definitions": {
    "ApiError": {
      "description": "ApiError\nAn error occurred. This can be an invalid input of other unexpected error occurred.",
      "type": "object",
      "properties": {
        "code": {
          "type": "integer",
          "format": "int64",
          "x-go-name": "Code"
        },
        "details": {
          "type": "string",
          "x-go-name": "Details"
        },
        "message": {
          "type": "string",
          "x-go-name": "Message"
        }
      },
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/api/errors"
    },
    "CallbackType": {
      "description": "type of callback: [HTTP, BEARER_TOKEN, BASIC_AUTH]",
      "type": "string",
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/models"
    },
    "Credentials": {
      "description": "credentials of api to deliver events",
      "type": "object",
      "properties": {
        "accessToken": {
          "type": "string",
          "x-go-name": "AccessToken"
        },
        "basicAuthPassword": {
          "type": "string",
          "x-go-name": "BasicAuthPassword"
        },
        "basicAuthUsername": {
          "type": "string",
          "x-go-name": "BasicAuthUsername"
        }
      },
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/models"
    },
    "Filter": {
      "description": "Define a Filter on an EventType to filter the event. This allows to reduce the network traffic",
      "type": "object",
      "properties": {
        "Filtering": {
          "$ref": "#/definitions/GraphQL"
        }
      },
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/models"
    },
    "GraphQL": {
      "description": "Define a filter with GraphQL",
      "type": "string",
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/models"
    },
    "Subscription": {
      "description": "An application is able to have a subscription for events\nEvents will be send to the callback endpoint of the subscription",
      "type": "object",
      "required": [
        "callback"
      ],
      "properties": {
        "callback": {
          "description": "the endpoint to receive the callback",
          "type": "string",
          "x-go-name": "Callback"
        },
        "callbackType": {
          "$ref": "#/definitions/CallbackType"
        },
        "credentials": {
          "$ref": "#/definitions/Credentials"
        },
        "filters": {
          "description": "the emitted event can be filter to receive not all data from an event type",
          "type": "object",
          "additionalProperties": {
            "$ref": "#/definitions/Filter"
          },
          "x-go-name": "Filters"
        },
        "id": {
          "description": "the id of the subscription",
          "type": "string",
          "x-go-name": "Id",
          "readOnly": true
        },
        "info": {
          "description": "Information of the subscription. An information message can be for example about why the subscription is suspended.",
          "type": "string",
          "x-go-name": "SubscriptionInfo",
          "readOnly": true
        },
        "status": {
          "$ref": "#/definitions/SubscriptionStatuss"
        }
      },
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/models"
    },
    "SubscriptionStatuss": {
      "description": "status of subscription: [ACTIVE, SUSPENDED]\nNormally a subscription is active. When events fail to be delivered the subscription will be suspended. The subscription can become active again by updating the subscription.",
      "type": "string",
      "x-go-name": "SubscriptionStatus",
      "x-go-package": "github.com/FactomProject/live-api/EventRouter/models"
    }
  },
  "responses": {
    "ApiError": {
      "description": "ApiErrorResponse",
      "schema": {
        "$ref": "#/definitions/ApiError"
      }
    },
    "SubscriptionResponse": {
      "description": "An SubscriptionResponse is the stored subscription",
      "schema": {
        "$ref": "#/definitions/Subscription"
      }
    },
    "UnsubscriptionResponse": {
      "description": "A Subscription is returned that is successfully unsubscribed",
      "schema": {
        "$ref": "#/definitions/Subscription"
      }
    },
    "UpdateSubscriptionResponse": {
      "description": "An SubscriptionResponse is the stored subscription",
      "schema": {
        "$ref": "#/definitions/Subscription"
      }
    }
  }
}