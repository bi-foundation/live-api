syntax = "proto3";
package eventmessages;
option go_package = "eventmessages";
option java_package = "com.factom.factomd.eventmessages";

import "eventmessages/generalTypes.proto";
import "github.com/bi-foundation/protobuf-graphql-extension/graphqlproto/graphql.proto";
import "github.com/bi-foundation/protobuf-graphql-extension/graphqlproto/types/timestamp.proto";

option (graphqlproto.graphql) = true;

message EntryCreditBlock {
    EntryCreditBlockHeader header = 1;
    repeated EntryCreditBlockEntry entries = 2;
}

message EntryCreditBlockHeader {
    Hash bodyHash = 1;
    Hash previousHeaderHash = 2;
    Hash previousFullHash = 3;
    uint32 blockHeight = 4;
    bytes headerExpansionArea = 5;
    uint64 objectCount = 6;
    uint64 bodySize = 7;
}


message EntryCreditBlockEntry {
    oneof value {
        EntryCreditChainCommit entryCreditChainCommit = 1;
        EntryCreditEntryCommit entryCreditEntryCommit = 2;
        IncreaseBalance increaseBalance = 3;
        MinuteNumber minuteNumber = 4;
        ServerIndexNumber serverIndexNumber = 5;
    }
}


message EntryCreditChainCommit {  // This message was duplicated from ChainCommit because of a limitation by the GraphQL generator. (It's not checking imports.)
    EntityState entityState = 1;
    Hash chainIDHash = 2;
    Hash entryHash = 3;
    Hash weld = 4;
    graphqlproto.types.Timestamp timestamp = 5;
    uint32 credits = 6;
    bytes entryCreditPublicKey = 7;
    bytes signature = 8;
}

message EntryCreditEntryCommit {  // This message was duplicated from EntryCommit because of a limitation by the GraphQL generator. (It's not checking imports.)
    EntityState entityState = 1;
    Hash entryHash = 2;
    graphqlproto.types.Timestamp timestamp = 3;
    uint32 credits = 4;
    bytes entryCreditPublicKey = 5;
    bytes signature = 6;
}

message IncreaseBalance {
    bytes entryCreditPublicKey = 1;
    Hash transactionID = 2;
    uint64 index = 3;
    uint64 amount = 4;
}

message MinuteNumber {
    uint32 minuteNumber = 1;
}

message ServerIndexNumber {
    uint32 serverIndexNumber = 1;
}
